{"version":3,"sources":["webpack:///webpack/bootstrap 0ef75957a6da5c6e88aa","webpack:///external \"dotenv\"","webpack:///external \"mongoose\"","webpack:///external \"babel-polyfill\"","webpack:///./server/models/Pin.js","webpack:///./server/server.js","webpack:///external \"es6-promise\"","webpack:///external \"isomorphic-fetch\"","webpack:///external \"express\"","webpack:///external \"morgan\"","webpack:///external \"compression\"","webpack:///external \"express-session\"","webpack:///external \"passport\"","webpack:///external \"connect-mongo\"","webpack:///external \"body-parser\"","webpack:///external \"cookie-parser\"","webpack:///./server/routes/index.server.js","webpack:///./server/controllers/pinController.server.js","webpack:///./server/config/authConfig.js","webpack:///./server/models/User.js","webpack:///external \"passport-github2\"","webpack:///external \"passport-twitter\"","webpack:///external \"http\"","webpack:///external \"socket.io\"","webpack:///./server/routes/socket.server.js"],"names":["Schema","Pin","created","type","Date","required","default","expires","img","String","likes","shares","title","owner","model","polyfill","app","path","process","cwd","load","DEV","PROD","use","console","log","static","db","connection","Promise","connect","env","MONGO_URI","useMongoClient","err","error","MongoStore","urlencoded","extended","sess","secret","SECRET","resave","saveUninitialized","cookie","httpOnly","maxAge","store","mongooseConnection","name","set","secure","initialize","session","server","createServer","io","port","PORT","listen","routes","passport","name_view","permissions","req","res","next","isAuthenticated","user","github","username","twitter","redirect","route","get","sendFile","authenticate","successRedirect","failureRedirect","json","logout","post","delete","toggleLikePin","obj","JSON","parse","decodeURIComponent","params","data","loggedUser","findOne","doc","indexOf","splice","push","save","result","allPins","find","unpinAll","remove","savePin","newPin","deletePin","GitHubStrategy","require","Strategy","TwitterStrategy","authConfig","serializeUser","done","id","deserializeUser","findById","consumerKey","TWITTER_CONSUMER_KEY","consumerSecret","TWITTER_CONSUMER_SECRET","callbackURL","APP_URL","token","tokenSecret","profile","cb","nextTick","newUser","displayName","clientID","GITHUB_KEY","clientSecret","GITHUB_SECRET","refreshToken","mongoose","User","ioEvents","on","serverSocket","emit","setInterval","received"],"mappings":"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","file":"server.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0ef75957a6da5c6e88aa","module.exports = require(\"dotenv\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dotenv\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"babel-polyfill\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-polyfill\"\n// module id = 2\n// module chunks = 0","'use strict'\n\nimport mongoose from 'mongoose'\n\nconst Schema = mongoose.Schema\n\nconst Pin = new Schema({\n  created: {\n    type: Date,\n    required: true,\n    default: new Date(),\n    expires: '365d'\n  },\n  img: {\n    type: String,\n    default: '../../client/img/image.png' //This is redundant from default client state\n  },\n  likes: [String],\n  shares: [String],\n  title: { type: String, required: true },\n  owner: { type: String, required: true }\n})\n\nexport default mongoose.model('Pin', Pin)\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/Pin.js","'use strict'\n\n/*** ES6+ ***/\nimport 'babel-polyfill'\nimport Promise from 'es6-promise'\nPromise.polyfill()\nimport 'isomorphic-fetch'\n\n/*** EXPRESS ***/\nimport express from 'express'\nconst app = express()\n\n/*** ENVIRONMENT ***/\nconst path = process.cwd()\nimport dotenv from 'dotenv'\ndotenv.load()\n\n/*** DEVELOPMENT TOOLS ***/\nconst DEV = process.env.NODE_ENV === 'development'\nconst PROD = process.env.NODE_ENV === 'production'\nimport morgan from 'morgan'\nDEV ? app.use(morgan('dev')) : app.use(morgan('tiny'))\nconsole.log('DEV?', DEV)\n\n/*** ENABLE COMPRESSION ***/\nimport compression from 'compression'\nif (PROD) {\n  app.use(compression())\n}\n\n/*** MIDDLEWARE ***/\napp.use('/js', express.static(path + '/dist/js')) //The first argument creates the virtual directory used in index.html\napp.use('/styles', express.static(path + '/dist/styles'))\napp.use('/img', express.static(path + '/dist/img'))\napp.use('/fonts', express.static(path + '/dist/fonts'))\n\n/*** MONGOOSE ***/\nimport mongoose from 'mongoose'\nconst db = mongoose.connection\nmongoose.Promise = Promise\nmongoose.connect(process.env.MONGO_URI, { useMongoClient: true }, (err, db) => {\n  if (err) {\n    console.error('Failed to connect to database!')\n  } else {\n    console.log('Connected to database.')\n  }\n})\n\n/*** AUTHENTICATION ***/\nimport session from 'express-session'\nimport passport from 'passport'\n\nimport connectMongo from 'connect-mongo'\nconst MongoStore = connectMongo(session)\n\nimport bodyParser from 'body-parser'\nimport cookieParser from 'cookie-parser'\n\napp.use(bodyParser.urlencoded({ extended: false }))\napp.use(cookieParser())\n\nlet sess = {\n  secret: process.env.SECRET,\n  resave: false,\n  saveUninitialized: false,\n  cookie: {\n    path: '/',\n    httpOnly: false,\n    maxAge: 1800000 //30 minutes\n  },\n  store: new MongoStore({ mongooseConnection: db }, err => {\n    console.error(err)\n  }), //defaults to MemoryStore instance, which can cause memory leaks\n  name: 'id'\n}\n\nif (PROD) {\n  app.set('trust proxy', 1)\n  sess.cookie.secure = true //serve secure cookies in production\n  sess.cookie.httpOnly = true\n}\n\napp.use(session(sess))\napp.use(passport.initialize())\napp.use(passport.session())\n\n/*** ROUTES ***/\nimport { routes } from './routes/index.server.js'\nimport { authConfig } from './config/authConfig.js'\nauthConfig(passport)\nroutes(app, passport)\n\n/*** WEB SOCKETS ***/\nimport http from 'http'\nconst server = http.createServer(app)\nimport socket from 'socket.io'\nconst io = socket(server)\nimport ioEvents from './routes/socket.server.js'\nioEvents(io)\n\n/*** SERVE ***/\nconst port = process.env.PORT\nserver.listen(port, () => {\n  console.log('Server is listening on port ' + port + '.')\n})\n\n\n\n// WEBPACK FOOTER //\n// ./server/server.js","module.exports = require(\"es6-promise\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"es6-promise\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"isomorphic-fetch\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"isomorphic-fetch\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"morgan\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"morgan\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"compression\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"compression\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"express-session\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-session\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"passport\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"connect-mongo\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"connect-mongo\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"cookie-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cookie-parser\"\n// module id = 15\n// module chunks = 0","'use strict'\n\n/*** ENVIRONMENT ***/\nconst path = process.cwd()\nimport dotenv from 'dotenv'\ndotenv.load()\n\n/*** DEVELOPMENT TOOLS ***/\nconst DEV = process.env.NODE_ENV === 'development'\n\n/*** CONTROLLERS ***/\nimport {\n  allPins,\n  savePin,\n  deletePin,\n  toggleLikePin,\n  unpinAll\n} from '../controllers/pinController.server.js'\n\n/*** ROUTES ***/\nexport const routes = (app, passport) => {\n  let name_view //This is the name that will display in the client view\n\n  //Authorization check\n  const permissions = (req, res, next) => {\n    if (req.isAuthenticated()) {\n      if (DEV) {\n        console.log('AUTHORIZATION SUCCESSFUL')\n      }\n      if (req.user.github.username) {\n        name_view = req.user.github.username\n      } else if (req.user.twitter.username) {\n        name_view = req.user.twitter.username\n      }\n      console.log('USER:', name_view)\n      return next()\n    } else {\n      if (DEV) {\n        console.log('USER NOT AUTHORIZED')\n      }\n      res.redirect('/login')\n    }\n  }\n\n  /*\n  //Allows session's name_view to be accessed by controllers\n  app.use((req, res, next) => {\n    res.locals.name_view = name_view\n    next()\n  })\n  */\n\n  //Root view\n  app.route('/').get(permissions, (req, res) => {\n    res.sendFile(path + '/dist/index.html')\n  })\n\n  //Login view\n  app.route('/login').get((req, res) => {\n    res.sendFile(path + '/dist/login.html')\n  })\n\n  //GitHub and Passport.js authentication - URL\n  app.route('/auth/github').get(passport.authenticate('github'))\n\n  //GitHub and Passport.js authentication - callback\n  app.route('/auth/github/callback').get(\n    passport.authenticate('github', {\n      successRedirect: '/',\n      failureRedirect: '/login'\n    })\n  )\n\n  //Twitter Auth\n  app.route('/auth/twitter').get(passport.authenticate('twitter'))\n\n  //Twitter Auth\n  app.route('/auth/twitter/callback').get(\n    passport.authenticate('twitter', {\n      successRedirect: '/',\n      failureRedirect: '/login'\n    })\n  )\n\n  //Client-side API path to GET name_view\n  //Unclear why this won't work with a permissions check\n  app.route('/api/users/logged').get(\n    /*permissions,*/ (req, res) => {\n      if (DEV) {\n        console.log('Client requesting username...')\n      }\n      if (name_view) {\n        res.json(name_view)\n      } else {\n        console.log('name_view ERROR')\n        res.json('Stranger')\n      }\n    }\n  )\n\n  //Passport logout\n  app.route('/logout').get((req, res) => {\n    req.logout()\n    res.redirect('/login')\n  })\n\n  //Save new pin\n  //Unclear why this won't work with a permissions check\n  app.route('/api/savePin/:data').post(/*permissions,*/ savePin)\n\n  //Delete pin\n  //Unclear why this won't work with a permissions check\n  app.route('/api/deletePin/:data').delete(/*permissions,*/ deletePin)\n\n  //All pins\n  app.route('/api/allPins').get(allPins)\n\n  //Like or unlike a pin\n  //Unclear why this won't work with a permissions check\n  app.route('/api/toggleLikePin/:data').post(/*permissions,*/ toggleLikePin)\n\n  /*** DEBUGGING - No UI ***/\n  //Delete all pins\n  app.use('/api/unpinAll', unpinAll)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/routes/index.server.js","'use strict'\n\n/*** ENVIRONMENT ***/\nconst path = process.cwd()\nimport dotenv from 'dotenv'\ndotenv.load()\n\n/*** DEVELOPMENT TOOLS ***/\nconst DEV = process.env.NODE_ENV === 'development'\n\n/*** MODEL ***/\nimport Pin from '../models/Pin.js'\n\n/*** FUNCTIONS ***/\n//Toggle Like Pin\nexport const toggleLikePin = (req, res) => {\n  const obj = JSON.parse(decodeURIComponent(req.params.data))\n  const title = obj.title\n  const img = obj.img\n  const owner = obj.owner\n  const user = obj.loggedUser\n\n  Pin.findOne(\n    {\n      title: title,\n      img: img,\n      owner: owner\n    },\n    (err, doc) => {\n      if (err) {\n        console.error(err)\n      }\n      if (doc) {\n        //If the user already liked the pin\n        if (doc.likes.indexOf(user) >= 0) {\n          //Remove the like\n          doc.likes.splice(doc.likes.indexOf(user), 1)\n          if (DEV) {\n            console.log('This pin has been unliked!')\n          }\n        } else {\n          //Otherwise add it\n          doc.likes.push(user)\n          if (DEV) {\n            console.log('This pin has been liked!')\n          }\n        }\n        //Save what happened\n        doc.save((err, result) => {\n          res.json('Saved' + result)\n        })\n      }\n    }\n  )\n}\n\n//Get all pins\nexport const allPins = (req, res) => {\n  Pin.find({}, (err, doc) => {\n    if (err) {\n      console.error(err)\n    }\n    if (doc) {\n      res.json(doc)\n    }\n  })\n}\n\n//Delete all pins\nexport const unpinAll = (req, res) => {\n  Pin.remove({}, (err, doc) => {\n    res.json('All pins deleted.')\n  })\n}\n\n//Save new Pin\nexport const savePin = (req, res) => {\n  const obj = JSON.parse(decodeURIComponent(req.params.data))\n  const title = obj.title\n  const img = obj.img\n  const owner = obj.owner\n  Pin.findOne(\n    {\n      title: title,\n      img: img,\n      owner: owner\n    },\n    (err, doc) => {\n      if (err) {\n        console.error(err)\n      }\n      if (doc) {\n        res.json('You already pinned this!')\n      } else {\n        const newPin = new Pin({\n          title: title,\n          img: img,\n          owner: owner\n        })\n        newPin.save((err, doc) => {\n          if (err) {\n            console.error(err)\n          }\n          res.json('Your pin has been saved!')\n        })\n      }\n    }\n  )\n}\n\n//Delete Pin\nexport const deletePin = (req, res) => {\n  const obj = JSON.parse(decodeURIComponent(req.params.data))\n  const title = obj.title\n  const img = obj.img\n  const owner = obj.owner\n\n  Pin.remove(\n    {\n      title: title,\n      img: img,\n      owner: owner\n    },\n    (err, doc) => {\n      if (err) {\n        console.error(err)\n      }\n      if (doc) {\n        res.json('Your pin has been deleted.')\n      }\n    }\n  )\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/pinController.server.js","'use strict'\n\nconst GitHubStrategy = require('passport-github2').Strategy\nconst TwitterStrategy = require('passport-twitter').Strategy\nimport User from '../models/User.js'\n\nexport const authConfig = passport => {\n  passport.serializeUser((user, done) => {\n    done(null, user.id)\n  })\n\n  passport.deserializeUser((id, done) => {\n    User.findById(id, (err, user) => {\n      done(err, user)\n    })\n  })\n\n  passport.use(\n    new TwitterStrategy(\n      {\n        consumerKey: process.env.TWITTER_CONSUMER_KEY,\n        consumerSecret: process.env.TWITTER_CONSUMER_SECRET,\n        callbackURL: process.env.APP_URL + 'auth/twitter/callback/'\n      },\n      (token, tokenSecret, profile, cb) => {\n        process.nextTick(() => {\n          User.findOne(\n            {\n              'twitter.id': profile.id\n            },\n            (err, user) => {\n              if (err) {\n                return cb(err)\n              }\n              if (user) {\n                return cb(null, user)\n              } else {\n                const newUser = new User()\n\n                newUser.twitter.id = profile.id\n                newUser.twitter.username = profile.username\n                newUser.twitter.displayName = profile.displayName\n\n                newUser.save(err => {\n                  if (err) {\n                    throw err\n                  }\n                  return cb(null, newUser)\n                })\n              }\n            }\n          )\n        })\n      }\n    )\n  )\n\n  passport.use(\n    new GitHubStrategy(\n      {\n        clientID: process.env.GITHUB_KEY,\n        clientSecret: process.env.GITHUB_SECRET,\n        callbackURL: process.env.APP_URL + 'auth/github/callback/'\n      },\n      (token, refreshToken, profile, done) => {\n        process.nextTick(() => {\n          User.findOne(\n            {\n              'github.id': profile.id\n            },\n            (err, user) => {\n              if (err) {\n                return done(err)\n              }\n              if (user) {\n                return done(null, user)\n              } else {\n                const newUser = new User()\n\n                newUser.github.id = profile.id\n                newUser.github.username = profile.username\n                newUser.github.displayName = profile.displayName\n\n                newUser.save(err => {\n                  if (err) {\n                    throw err\n                  }\n                  return done(null, newUser)\n                })\n              }\n            }\n          )\n        })\n      }\n    )\n  )\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/config/authConfig.js","'use strict'\n\nconst mongoose = require('mongoose')\nconst Schema = mongoose.Schema\n\nconst User = new Schema({\n  github: {\n    id: String,\n    displayName: String,\n    username: String,\n    created: {\n      type: Date,\n      required: true,\n      default: new Date(),\n      expires: '365d'\n    }\n  },\n  twitter: {\n    id: String,\n    displayName: String,\n    username: String,\n    created: {\n      type: Date,\n      required: true,\n      default: new Date(),\n      expires: '365d'\n    }\n  }\n})\n\nexport default mongoose.model('User', User)\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/User.js","module.exports = require(\"passport-github2\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport-github2\"\n// module id = 20\n// module chunks = 0","module.exports = require(\"passport-twitter\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport-twitter\"\n// module id = 21\n// module chunks = 0","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 22\n// module chunks = 0","module.exports = require(\"socket.io\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"socket.io\"\n// module id = 23\n// module chunks = 0","'use strict'\n\n/*** ENVIRONMENT ***/\nconst path = process.cwd()\nimport dotenv from 'dotenv'\ndotenv.load()\n\n/*** DEVELOPMENT TOOLS ***/\nconst DEV = process.env.NODE_ENV === 'development'\n\n/*** MODEL ***/\nimport Pin from '../models/Pin.js'\n\n/*** Web Socket Events ***/\nconst ioEvents = io => {\n  io.on('connection', serverSocket => {\n    if (DEV) {\n      console.log('Web Sockets connected.')\n    }\n    //Callback 1\n    serverSocket.emit('start', 'Regular communications received...')\n\n    //Callback 2\n    serverSocket.on('start', received => {\n      setInterval(() => {\n        Pin.find({}, (err, doc) => {\n          if (err) {\n            console.error(err)\n          }\n          if (doc) {\n            serverSocket.emit('updateAllPins', doc)\n          }\n        })\n      }, received)\n    })\n\n    io.on('disconnect', () => {\n      console.log('Web Sockets disconnected.')\n    })\n  })\n}\n\nexport default ioEvents\n\n\n\n// WEBPACK FOOTER //\n// ./server/routes/socket.server.js"],"sourceRoot":""}